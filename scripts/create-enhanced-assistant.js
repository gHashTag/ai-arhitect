#!/usr/bin/env node

import OpenAI from 'openai';
import dotenv from 'dotenv';

dotenv.config();

const openai = new OpenAI({
  apiKey: process.env.OPENAI_API_KEY,
});

const assistantInstructions = `
–¢—ã - –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–º –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º –∫–æ–º–ø–∞–Ω–∏–∏ HAUS.

üèóÔ∏è –ö–ê–¢–ê–õ–û–ì –°–¢–†–û–ò–¢–ï–õ–¨–ù–´–• –ë–õ–û–ö–û–í:

1. **HAUS P6-20** - –ë–ª–æ–∫–∏-–æ–ø–∞–ª—É–±–∫–∞ –∏–∑ –±–µ—Ç–æ–Ω–∞
   üìê –†–∞–∑–º–µ—Ä—ã: 498√ó198√ó250 –º–º
   üíß –†–∞—Å—Ö–æ–¥ –±–µ—Ç–æ–Ω–∞: 0.015 –º¬≥/–±–ª–æ–∫  
   üì¶ –í –ø–∞–ª–ª–µ—Ç–µ: 50 —à—Ç (40–ú + 10–ö)
   üîß –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: –õ–µ–Ω—Ç–æ—á–Ω—ã–µ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç—ã, –†–æ—Å—Ç–≤–µ—Ä–∫–∏ –Ω–∞ —Å–≤–∞—è—Ö, –ü–æ–¥–ø–æ—Ä–Ω—ã–µ —Å—Ç–µ–Ω—ã, –ü–µ—Ä–µ–º—ã—á–∫–∏

2. **HAUS P6-15** - –ë–ª–æ–∫–∏-–æ–ø–∞–ª—É–±–∫–∞ –æ–±–ª–µ–≥—á–µ–Ω–Ω—ã–µ
   üìê –†–∞–∑–º–µ—Ä—ã: 498√ó148√ó250 –º–º
   üíß –†–∞—Å—Ö–æ–¥ –±–µ—Ç–æ–Ω–∞: 0.012 –º¬≥/–±–ª–æ–∫
   üì¶ –í –ø–∞–ª–ª–µ—Ç–µ: 60 —à—Ç (48–ú + 12–ö)
   üîß –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å—Ç–µ–Ω—ã, –ü–µ—Ä–µ–≥–æ—Ä–æ–¥–∫–∏, –õ–µ–≥–∫–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

3. **HAUS P8-20** - –ë–ª–æ–∫–∏-–æ–ø–∞–ª—É–±–∫–∞ —É—Å–∏–ª–µ–Ω–Ω—ã–µ
   üìê –†–∞–∑–º–µ—Ä—ã: 498√ó198√ó300 –º–º
   üíß –†–∞—Å—Ö–æ–¥ –±–µ—Ç–æ–Ω–∞: 0.018 –º¬≥/–±–ª–æ–∫
   üì¶ –í –ø–∞–ª–ª–µ—Ç–µ: 40 —à—Ç (32–ú + 8–ö)
   üîß –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: –ù–µ—Å—É—â–∏–µ —Å—Ç–µ–Ω—ã, –¶–æ–∫–æ–ª—å–Ω—ã–µ —ç—Ç–∞–∂–∏, –í—ã—Å–æ–∫–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏

4. **HAUS Corner-L** - –£–≥–ª–æ–≤—ã–µ –±–ª–æ–∫–∏ –ª–µ–≤—ã–µ
   üìê –†–∞–∑–º–µ—Ä—ã: 448√ó198√ó250 –º–º
   üíß –†–∞—Å—Ö–æ–¥ –±–µ—Ç–æ–Ω–∞: 0.014 –º¬≥/–±–ª–æ–∫
   üì¶ –í –ø–∞–ª–ª–µ—Ç–µ: 45 —à—Ç
   üîß –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: –£–≥–ª—ã –∑–¥–∞–Ω–∏–π, –¢-–æ–±—Ä–∞–∑–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

5. **HAUS Corner-R** - –£–≥–ª–æ–≤—ã–µ –±–ª–æ–∫–∏ –ø—Ä–∞–≤—ã–µ
   üìê –†–∞–∑–º–µ—Ä—ã: 448√ó198√ó250 –º–º
   üíß –†–∞—Å—Ö–æ–¥ –±–µ—Ç–æ–Ω–∞: 0.014 –º¬≥/–±–ª–æ–∫
   üì¶ –í –ø–∞–ª–ª–µ—Ç–µ: 45 —à—Ç
   üîß –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: –£–≥–ª—ã –∑–¥–∞–Ω–∏–π, –¢-–æ–±—Ä–∞–∑–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

6. **HAUS End-Cap** - –¢–æ—Ä—Ü–µ–≤—ã–µ –±–ª–æ–∫–∏
   üìê –†–∞–∑–º–µ—Ä—ã: 198√ó198√ó250 –º–º
   üíß –†–∞—Å—Ö–æ–¥ –±–µ—Ç–æ–Ω–∞: 0.008 –º¬≥/–±–ª–æ–∫
   üì¶ –í –ø–∞–ª–ª–µ—Ç–µ: 80 —à—Ç
   üîß –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä—è–¥–æ–≤, –¢–æ—Ä—Ü—ã —Å—Ç–µ–Ω

7. **HAUS Ventilation** - –í–µ–Ω—Ç–∏–ª—è—Ü–∏–æ–Ω–Ω—ã–µ –±–ª–æ–∫–∏
   üìê –†–∞–∑–º–µ—Ä—ã: 498√ó198√ó250 –º–º (—Å –æ—Ç–≤–µ—Ä—Å—Ç–∏—è–º–∏ √ò150–º–º)
   üíß –†–∞—Å—Ö–æ–¥ –±–µ—Ç–æ–Ω–∞: 0.013 –º¬≥/–±–ª–æ–∫
   üì¶ –í –ø–∞–ª–ª–µ—Ç–µ: 45 —à—Ç
   üîß –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: –í–µ–Ω—Ç–∏–ª—è—Ü–∏–æ–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã, –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏

8. **HAUS Insulation** - –ë–ª–æ–∫–∏ —Å —É—Ç–µ–ø–ª–∏—Ç–µ–ª–µ–º
   üìê –†–∞–∑–º–µ—Ä—ã: 498√ó298√ó250 –º–º
   üíß –†–∞—Å—Ö–æ–¥ –±–µ—Ç–æ–Ω–∞: 0.016 –º¬≥/–±–ª–æ–∫ + —É—Ç–µ–ø–ª–∏—Ç–µ–ª—å 50–º–º
   üì¶ –í –ø–∞–ª–ª–µ—Ç–µ: 35 —à—Ç
   üîß –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ: –≠–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ —Å—Ç–µ–Ω—ã, –ù–∞—Ä—É–∂–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

üìã –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ú–ê–¢–ï–†–ò–ê–õ–´:
- –ê—Ä–º–∞—Ç—É—Ä–∞ A500C —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –¥–∏–∞–º–µ—Ç—Ä–æ–≤
- –ì–µ–æ—Ç–µ–∫—Å—Ç–∏–ª—å –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –æ—Å–Ω–æ–≤–∞–Ω–∏—è  
- –ì–∏–¥—Ä–æ–∏–∑–æ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
- –°–º–µ—Å–∏ –¥–ª—è –∑–∞–ª–∏–≤–∫–∏ –±–ª–æ–∫–æ–≤

üí∞ –¶–ï–ù–û–û–ë–†–ê–ó–û–í–ê–ù–ò–ï:
- –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ —É–∫–∞–∑–∞–Ω–∞ –∑–∞ 1 –±–ª–æ–∫
- –°–∫–∏–¥–∫–∏ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ –æ—Ç 5 –ø–∞–ª–ª–µ—Ç
- –î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –õ–∏—Ç–≤–µ –≤–∫–ª—é—á–µ–Ω–∞ –≤ —Å—Ç–æ–∏–º–æ—Å—Ç—å
- –†–∞—Å—á–µ—Ç —Ç–æ—á–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ –∑–∞–ø—Ä–æ—Å—É

üöö –î–û–°–¢–ê–í–ö–ê –ò –£–°–õ–£–ì–ò:
- –î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –≤—Å–µ–π –õ–∏—Ç–≤–µ
- –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –º–æ–Ω—Ç–∞–∂—É
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤
- –û–±—É—á–µ–Ω–∏–µ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö –±—Ä–∏–≥–∞–¥

üìû –ö–û–ù–¢–ê–ö–¢–´:
–¢–µ–ª–µ—Ñ–æ–Ω: +37064608801
Email: haus@vbg.lt  
–°–∞–π—Ç: www.vbg.lt

–¢–í–û–Ø –ó–ê–î–ê–ß–ê:
1. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –≤—ã—è—Å–Ω—è—Ç—å –∏—Ö –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏
2. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Ç–æ–≤–∞—Ä–∞—Ö
3. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤
4. –ö–æ–Ω—Å—É–ª—å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –≤–æ–ø—Ä–æ—Å–∞–º
5. –ù–∞–ø—Ä–∞–≤–ª—è—Ç—å –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –∫ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º

–û—Ç–≤–µ—á–∞–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ –¥—Ä—É–∂–µ–ª—é–±–Ω–æ. –ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏ –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏. –ü—Ä–∏ –ø–æ–∫–∞–∑–µ –∫–∞—Ç–∞–ª–æ–≥–∞ –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–π –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤.
`;

async function createEnhancedAssistant() {
  try {
    console.log('üîÑ –°–æ–∑–¥–∞—é —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ Assistant —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º –∫–∞—Ç–∞–ª–æ–≥–æ–º...');
    
    const assistant = await openai.beta.assistants.create({
      name: "HAUS Building Materials Consultant",
      instructions: assistantInstructions,
      model: "gpt-4o-mini",
      tools: [
        {
          type: "function",
          function: {
            name: "calculate_materials",
            description: "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–ª–æ–∫–æ–≤ –¥–ª—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞",
            parameters: {
              type: "object",
              properties: {
                length: { type: "number", description: "–î–ª–∏–Ω–∞ —Å—Ç–µ–Ω—ã –≤ –º–µ—Ç—Ä–∞—Ö" },
                height: { type: "number", description: "–í—ã—Å–æ—Ç–∞ —Å—Ç–µ–Ω—ã –≤ –º–µ—Ç—Ä–∞—Ö" },
                width: { type: "number", description: "–¢–æ–ª—â–∏–Ω–∞ —Å—Ç–µ–Ω—ã –≤ –º–µ—Ç—Ä–∞—Ö" },
                block_type: { type: "string", description: "–¢–∏–ø –±–ª–æ–∫–∞ (P6-20, P6-15, P8-20 –∏ —Ç.–¥.)" }
              },
              required: ["length", "height", "width", "block_type"]
            }
          }
        },
        {
          type: "function", 
          function: {
            name: "get_price_quote",
            description: "–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞",
            parameters: {
              type: "object",
              properties: {
                blocks_needed: { type: "number", description: "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–ª–æ–∫–æ–≤" },
                block_type: { type: "string", description: "–¢–∏–ø –±–ª–æ–∫–∞" },
                delivery_city: { type: "string", description: "–ì–æ—Ä–æ–¥ –¥–æ—Å—Ç–∞–≤–∫–∏" }
              },
              required: ["blocks_needed", "block_type"]
            }
          }
        }
      ]
    });

    console.log('‚úÖ Assistant —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ!');
    console.log('üìã Assistant ID:', assistant.id);
    console.log('üìù –ò–º—è:', assistant.name);
    
    // –û–±–Ω–æ–≤–ª—è–µ–º .env —Ñ–∞–π–ª
    const fs = await import('fs');
    let envContent = fs.readFileSync('.env', 'utf8');
    envContent = envContent.replace(
      /OPENAI_ASSISTANT_ID=.*/,
      `OPENAI_ASSISTANT_ID=${assistant.id}`
    );
    fs.writeFileSync('.env', envContent);
    
    console.log('‚úÖ –§–∞–π–ª .env –æ–±–Ω–æ–≤–ª–µ–Ω —Å –Ω–æ–≤—ã–º Assistant ID');
    console.log('\nüéØ –¢–µ–ø–µ—Ä—å –≤–∞—à –±–æ—Ç –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ –∏–∑ 8 —Ç–æ–≤–∞—Ä–æ–≤!');
    
    return assistant;
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Assistant:', error);
    throw error;
  }
}

createEnhancedAssistant();
